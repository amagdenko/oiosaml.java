<html>
<head>
<title>OIOSAML.java Maintenance</title>
        <style type="text/css">
    	body {background-color: white; margin: 20px;}
    	body, tr, td {font-family: Verdana, Helvetica, sans-serif; color: #456974;}
    	div#pagecontainer {width: 80%;}
    	h1, h2, h3, h4 {color: #76c2bc; border-bottom: 1px solid #76c2bc;}
    	.monospace {font-family: monospace;}
    	legend {font-weight: bold;}
    	fieldset {margin-top: 10px; margin-bottom: 10px;}
    	span.emphasis {font-weight: bold;}
    </style>
</head>
<body>

<h2>OIOSAML.java Service Provider Maintenance</h2>

<p>This page describes maintenance tasks after initial configuration and installation.</p>


<h3>Log file rotation</h3>
<p>OIOSAML.java creates log files in ~/.oiosaml/logs. These files are rotated automatically by log4j when they reach 10 MB. If this is not appropriate, this policy can be edited in ~/.oiosaml/oiosaml-sp.log4j.xml.</p>

<h3>Backup</h3>
<p>After initial configuration, a backup can be made of the ~/.oiosaml dir. All filter configuration is stored here. If necessary, periodical backups can be made of the log files.</p>


<h3>Certificate expiration</h3>

<p>Both the IdP and SP certificates can expire at some point. Currently, there is no monitoring facilities built into OIOSAML.java, so no warnings will be given.</p>

<h4>Upgrading the IdP certificate</h4>
<p>To replace the IdP certificate, simply replace the entire IdP metadata file in ~/.oiosaml/metadata/IdP and restart the application.</p>

<p>OIOSAML.java also supports rolling upgrades of the IdP certificate. To do this, place the new metadata file together with the old file
and restart the application. Then OIOSAML encounters multiple IdP metadata files for the same IdP (identified by the EntityId), it will
collapse the files and merge the certificates. When checking signatures, all certificates for the IdP will be used for checking, and if one of
them succeeds, the signature will be valid.</p> 

</body>
</html>
